
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Enhanced Drug Recommendation System</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
    <link rel="stylesheet" href="static\css\style.css">
     
    <!-- <script src="static\js\script2.js"></script> -->
     <style>
        
        #homepage {
    background-image: url("back.jpg");
    background-size: cover;           /* Scale the image to cover the entire screen */
    background-repeat: no-repeat;      /* Prevent the image from repeating */
    background-attachment: fixed;      /* Keep the background fixed during scrolling */
    background-position: center;       /* Center the image */
}

#login-page{
    background-image: url("log.jpg");
    background-size: cover;           /* Scale the image to cover the entire screen */
    background-repeat: no-repeat;      /* Prevent the image from repeating */
    background-attachment: fixed;      /* Keep the background fixed during scrolling */
    background-position: center;
}

#register-page{
    background-image: url('static/images/reg.webp');
    background-size: cover;           /* Scale the image to cover the entire screen */
    background-repeat: no-repeat;      /* Prevent the image from repeating */
    background-attachment: fixed;      /* Keep the background fixed during scrolling */
    background-position: center;
}

#contact-page{
    background-image: url('static/images/cont.jpg');
    background-size: cover;           /* Scale the image to cover the entire screen */
    background-repeat: no-repeat;      /* Prevent the image from repeating */
    background-attachment: fixed;      /* Keep the background fixed during scrolling */
    background-position: center;
}

#recommendation-page{
    background-image: url('static/images/drug.jpeg');
    background-size: cover;           /* Scale the image to cover the entire screen */
    background-repeat: no-repeat;      /* Prevent the image from repeating */
    background-attachment: fixed;      /* Keep the background fixed during scrolling */
    background-position: center;
}
     </style>

</head>
<body>
    <div class="background-animation"></div>
    
    <!-- Navigation -->
    <nav class="nav-bar">
        <div class="logo animate__animated animate__fadeIn"><h2>DrugGenius</h2></div>
        <div class="nav-links">
            <button id="homeNavBtn" class="nav-btn">Home</button>
            <button id="loginNavBtn" class="nav-btn">Login</button>
            <button id="registerNavBtn" class="nav-btn">Register</button>
            <button id="contactNavBtn" class="nav-btn">Contact</button>
        </div>
    </nav>

    <!-- Add this inside your Contact section -->





    <!-- Homepage Section -->
    <section id="homepage" class="homepage-section animate__animated animate__fadeIn">
        <div class="homepage-content">
            <h1 class="animate__animated animate__fadeInDown">Welcome to <span class="highlight">DrugGenius</span></h1>
            <p class="description animate__animated animate__fadeIn">DrugGenius is an intelligent platform that provides personalized drug recommendations using advanced data-driven techniques.</p>
            
            <h2 class="animate__animated animate__fadeInUp">About the <span class="highlight">Decision Tree Algorithm</span></h2>
            <p class="info animate__animated animate__fadeIn">The Decision Tree Algorithm splits data into branches, representing possible decision paths. It helps us identify the most likely illness and suggest suitable medications. This method ensures accurate, efficient recommendations tailored to individual needs.</p>
    
            <a href="https://www.geeksforgeeks.org/decision-tree-algorithms/"><button id="decisionTreeBtn" class="submit-btn">Learn More</button></a>

            <h2 class="animate__animated animate__fadeInUp">How Our Drug Detection System Works</h2>
            <p class="info animate__animated animate__fadeIn">Our system cross-references patient symptoms with a vast database of medications and medical conditions. It takes into account potential allergies, chronic conditions, and other patient-specific factors to suggest safe and effective drugs.</p>
            
            <h3 class="highlight animate__animated animate__fadeInUp">Why Choose DrugGenius?</h3>
            <ul class="benefits-list animate__animated animate__fadeIn">
                <li>Accurate, data-driven recommendations based on symptoms and conditions.</li>
                <li>Personalized suggestions, including allergy and chronic condition considerations.</li>
                <li>Easy-to-use interface with quick and reliable recommendations.</li>
            </ul>


            <button id="trainModelBtn" class="submit-btn">Train AI Model</button>
            <div id="trainModelMessage" style="margin-top: 20px; color: green;"></div>
    
            <br><br><br><br><br><br>
                <h4 class="contact-title animate__animated animate__fadeInUp">Contact Us:</h4>
                <div class="contact-icons">
                    <a href="https://www.instagram.com/shankar_gojo_01000101/"><img src="static\images\insta.png" alt="Instagram" class="contact-icon"></a> 
                    <a href="mailto:shankarpaikira225@gmail.com"><img src="static\images\gmail1.png" alt="Gmail" class="contact-icon"></a>
                    <a href="https://www.facebook.com/sadhana.rani.3954"><img src="static\images\fb.png" alt="Facebook" class="contact-icon"></a>
                    <a href="https://x.com/sha54773"><img src="static\images\x.png" alt="X" class="contact-icon"></a>
                </div>
                
        </div>
    </section>
    

    <!-- Contact Page Section -->
    <section id="contact-page" class="contact-section animate__animated animate__fadeIn hidden">
        <div class="contact-content">
            <h1 class="animate__animated animate__fadeInDown">Contact Us</h1>
            <p class="animate__animated animate__fadeIn">We'd love to hear from you! Please reach out with any questions, feedback, or support inquiries.</p>
    
            <div class="contact-icons">
                <a href="https://www.instagram.com/shankar_gojo_01000101/"><img src="static\images\insta.png" alt="Instagram" class="contact-icon"></a> 
                <a href="mailto:shankarpaikira225@gmail.com"><img src="static\images\gmail1.png" alt="Gmail" class="contact-icon"></a>
                <a href="https://www.facebook.com/sadhana.rani.3954"><img src="static\images\fb.png" alt="Facebook" class="contact-icon"></a>
                <a href="https://x.com/sha54773"><img src="static\images\x.png" alt="X" class="contact-icon"></a>
            </div>
    
            <form id="contactForm" class="contact-form animate__animated animate__fadeInUp">
              
                

                <div class="form-group">
                    <input type="text" id="contactName" name="contactName" required>
                    <label for="contactName">Name</label>
                </div>
                <div class="form-group">
                    <input type="email" id="contactEmail" name="contactEmail" required>
                    <label for="contactEmail">Email</label>
                </div>
                <div class="form-group">
                    <input type="text" id="contactMessage" name="contactMessage" rows="4" required>
                    <label for="contactMessage">Message</label>
                </div>
                <button type="submit" class="submit-btn">
                    <span>Send Message</span>
                    <div class="ripple"></div>
                </button>
            </form>
        </div>
    </section>
    


    <!-- Login Page -->
    <div id="login-page" class="auth-container animate__animated animate__fadeIn">
        <div class="auth-box">
            <h2>Welcome Back</h2>
            <form id="loginForm" class="auth-form" action="login.php" method="POST">

                <div class="form-group">
                    <input type="text" id="loginUsername" name="username" required>
                    <label>Username</label>
                </div>
                <div class="form-group">
                    <input type="password" id="loginPassword" name="password" required>
                    <label>Password</label>
                </div>
                <button type="submit" class="submit-btn">
                    <span>Login</span>
                    <div class="ripple"></div>
                </button>
                <p class="switch-form">New user? <a href="#" id="showRegister">Create account</a></p>
            </form>
        </div>
    </div>

    <!-- Registration Page -->
    <div id="register-page" class="auth-container animate__animated animate__fadeIn hidden">
        <div class="auth-box">
            <h2>Create Account</h2>
            <form id="registerForm" class="auth-form" action="register.php" method="POST">

                <div class="form-group">
                    <input type="text" id="registerUsername" name="username" required>
                    <label>Username</label>
                </div>
                <div class="form-group">
                    <input type="email" id="registerEmail"  name="email" required>
                    <label>Email</label>
                </div>
                <div class="form-group">
                    <input type="password" id="registerPassword" name="password" required>
                    <label>Password</label>
                </div>
                <div class="form-group">
                    <input type="password" id="confirmPassword" name="confirmPassword" required>
                    <label>Confirm Password</label>
                </div>
                <button type="submit" class="submit-btn">
                    <span>Register</span>
                    <div class="ripple"></div>
                </button>
                <p class="switch-form">Already have an account? <a href="#" id="showLogin">Login</a></p>
            </form>
        </div>
    </div>

    <!-- Drug Recommendation Form -->
    <div id="recommendation-page" class="container animate__animated animate__fadeIn hidden">
        <h1 class="heading">Drug Recommendation System</h1> <!-- Custom heading class added -->
        <form id="symptomForm">
            <!-- Common Symptoms Section -->
            <div class="symptoms-section">
                <h3>Common Symptoms</h3>
                <div class="symptom-grid">
                    <label class="animate__animated animate__fadeInUp">
                        <input type="checkbox" name="fever">
                        <span class="checkmark"></span>
                        Fever
                    </label>
                    <label class="animate__animated animate__fadeInUp">
                        <input type="checkbox" name="headache">
                        <span class="checkmark"></span>
                        Headache
                    </label>
                    <label class="animate__animated animate__fadeInUp">
                        <input type="checkbox" name="muscle_aches">
                        <span class="checkmark"></span>
                        Muscle Aches
                    </label>
                    <label class="animate__animated animate__fadeInUp">
                        <input type="checkbox" name="joint_pain">
                        <span class="checkmark"></span>
                        Joint Pain
                    </label>
                </div>
            </div>

            <!-- Respiratory Symptoms Section -->
            <div class="symptoms-section">
                <h3>Respiratory Symptoms</h3>
                <div class="symptom-grid">
                    <label class="animate__animated animate__fadeInUp">
                        <input type="checkbox" name="runny_nose">
                        <span class="checkmark"></span>
                        Runny Nose
                    </label>
                    <label class="animate__animated animate__fadeInUp">
                        <input type="checkbox" name="sneezing">
                        <span class="checkmark"></span>
                        Sneezing
                    </label>
                    <label class="animate__animated animate__fadeInUp">
                        <input type="checkbox" name="shortness_of_breath">
                        <span class="checkmark"></span>
                        Shortness of Breath
                    </label>
                    <label class="animate__animated animate__fadeInUp">
                        <input type="checkbox" name="wheezing">
                        <span class="checkmark"></span>
                        Wheezing
                    </label>
                    <label class="animate__animated animate__fadeInUp">
                        <input type="checkbox" name="asthma">
                        <span class="checkmark"></span>
                        Asthma
                    </label>
                    <label class="animate__animated animate__fadeInUp">
                        <input type="checkbox" name="sinus_infection">
                        <span class="checkmark"></span>
                        Sinus Infection
                    </label>
                </div>
            </div>

            <!-- Digestive Symptoms Section -->
            <div class="symptoms-section">
                <h3>Digestive Symptoms</h3>
                <div class="symptom-grid">
                    <label class="animate__animated animate__fadeInUp">
                        <input type="checkbox" name="heartburn">
                        <span class="checkmark"></span>
                        Heartburn
                    </label>
                    <label class="animate__animated animate__fadeInUp">
                        <input type="checkbox" name="acid_reflux">
                        <span class="checkmark"></span>
                        Acid Reflux
                    </label>
                    <label class="animate__animated animate__fadeInUp">
                        <input type="checkbox" name="stomach_pain">
                        <span class="checkmark"></span>
                        Stomach Pain
                    </label>
                </div>
            </div>

            <!-- Chronic Conditions Section -->
            <div class="symptoms-section">
                <h3>Chronic Conditions</h3>
                <div class="symptom-grid">
                    <label class="animate__animated animate__fadeInUp">
                        <input type="checkbox" name="high_blood_pressure">
                        <span class="checkmark"></span>
                        High Blood Pressure
                    </label>
                    <label class="animate__animated animate__fadeInUp">
                        <input type="checkbox" name="type_2_diabetes">
                        <span class="checkmark"></span>
                        Type 2 Diabetes
                    </label>
                    <label class="animate__animated animate__fadeInUp">
                        <input type="checkbox" name="hypothyroidism">
                        <span class="checkmark"></span>
                        Hypothyroidism
                    </label>
                </div>
            </div>

            <!-- Mental Health Section -->
            <div class="symptoms-section">
                <h3>Mental Health</h3>
                <div class="symptom-grid">
                    <label class="animate__animated animate__fadeInUp">
                        <input type="checkbox" name="depression">
                        <span class="checkmark"></span>
                        Depression
                    </label>
                    <label class="animate__animated animate__fadeInUp">
                        <input type="checkbox" name="anxiety">
                        <span class="checkmark"></span>
                        Anxiety
                    </label>
                </div>
            </div>

            <!-- Other Symptoms Section -->
            <div class="symptoms-section">
                <h3>Other Symptoms</h3>
                <div class="symptom-grid">
                    <label class="animate__animated animate__fadeInUp">
                        <input type="checkbox" name="itchy_eyes">
                        <span class="checkmark"></span>
                        Itchy Eyes
                    </label>
                    <label class="animate__animated animate__fadeInUp">
                        <input type="checkbox" name="bacterial_infection">
                        <span class="checkmark"></span>
                        Bacterial Infection
                    </label>
                    <label class="animate__animated animate__fadeInUp">
                        <input type="checkbox" name="sore_throat">
                        <span class="checkmark"></span>
                        Sore Throat
                    </label>
                </div>
            </div>

            <!-- Additional Symptoms Section -->
<div class="symptoms-section">
    <h3>Additional Symptoms</h3>
    <div class="symptom-grid">
        <!-- Add new symptoms here -->
        <label class="animate__animated animate__fadeInUp">
            <input type="checkbox" name="fatigue">
            <span class="checkmark"></span>
            Fatigue
        </label>
        <label class="animate__animated animate__fadeInUp">
            <input type="checkbox" name="dizziness">
            <span class="checkmark"></span>
            Dizziness
        </label>
        <label class="animate__animated animate__fadeInUp">
            <input type="checkbox" name="nausea">
            <span class="checkmark"></span>
            Nausea
        </label>
        <label class="animate__animated animate__fadeInUp">
            <input type="checkbox" name="vomiting">
            <span class="checkmark"></span>
            Vomiting
        </label>
        <label class="animate__animated animate__fadeInUp">
            <input type="checkbox" name="blurred_vision">
            <span class="checkmark"></span>
            Blurred Vision
        </label>
        <label class="animate__animated animate__fadeInUp">
            <input type="checkbox" name="chest_pain">
            <span class="checkmark"></span>
            Chest Pain
        </label>
        <label class="animate__animated animate__fadeInUp">
            <input type="checkbox" name="palpitations">
            <span class="checkmark"></span>
            Palpitations
        </label>
        <label class="animate__animated animate__fadeInUp">
            <input type="checkbox" name="sweating">
            <span class="checkmark"></span>
            Sweating
        </label>
        <label class="animate__animated animate__fadeInUp">
            <input type="checkbox" name="dry_mouth">
            <span class="checkmark"></span>
            Dry Mouth
        </label>
        <label class="animate__animated animate__fadeInUp">
            <input type="checkbox" name="difficulty_swallowing">
            <span class="checkmark"></span>
            Difficulty Swallowing
        </label>
        <label class="animate__animated animate__fadeInUp">
            <input type="checkbox" name="insomnia">
            <span class="checkmark"></span>
            Insomnia
        </label>
        <label class="animate__animated animate__fadeInUp">
            <input type="checkbox" name="hair_loss">
            <span class="checkmark"></span>
            Hair Loss
        </label>
        <label class="animate__animated animate__fadeInUp">
            <input type="checkbox" name="skin_rash">
            <span class="checkmark"></span>
            Skin Rash
        </label>
        <label class="animate__animated animate__fadeInUp">
            <input type="checkbox" name="constipation">
            <span class="checkmark"></span>
            Constipation
        </label>
        <label class="animate__animated animate__fadeInUp">
            <input type="checkbox" name="diarrhea">
            <span class="checkmark"></span>
            Diarrhea
        </label>
        <label class="animate__animated animate__fadeInUp">
            <input type="checkbox" name="loss_of_appetite">
            <span class="checkmark"></span>
            Loss of Appetite
        </label>
        <label class="animate__animated animate__fadeInUp">
            <input type="checkbox" name="weight_loss">
            <span class="checkmark"></span>
            Weight Loss
        </label>
        <label class="animate__animated animate__fadeInUp">
            <input type="checkbox" name="frequent_urination">
            <span class="checkmark"></span>
            Frequent Urination
        </label>
        <label class="animate__animated animate__fadeInUp">
            <input type="checkbox" name="back_pain">
            <span class="checkmark"></span>
            Back Pain
        </label>
        <label class="animate__animated animate__fadeInUp">
            <input type="checkbox" name="cold_intolerance">
            <span class="checkmark"></span>
            Cold Intolerance
        </label>
    </div>
</div>


            <!-- Additional Information Section -->
            <div class="patient-info-container">
                <h3 class="form-title">Patient Information</h3>
                <div class="patient-form">
                    <div class="form-row">
                        <div class="form-field">
                            <label for="age" class="field-label">Age</label>
                            <input 
                                type="number" 
                                id="age" 
                                name="age" 
                                min="0" 
                                max="120" 
                                class="field-input"
                                placeholder="Enter age"
                                required
                            >
                        </div>
                        <div class="form-field">
                            <label for="sex" class="field-label">Sex</label>
                            <select id="sex" name="sex" class="field-input" required>
                                <option value="" disabled selected>Select gender</option>
                                <option value="male">Male</option>
                                <option value="female">Female</option>
                                <option value="other">Other</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-field">
                            <label for="bp" class="field-label">Blood Pressure</label>
                            <input 
                                type="text" 
                                id="bp" 
                                name="bp" 
                                class="field-input"
                                placeholder="e.g., 120/80"
                                pattern="\d{2,3}\/\d{2,3}"
                                title="Please enter blood pressure in format: 120/80"
                                required
                            >
                        </div>
                        <div class="form-field">
                            <label for="temperature" class="field-label">Temperature (°C)</label>
                            <input 
                                type="number" 
                                id="temperature" 
                                name="temperature" 
                                class="field-input"
                                step="0.1" 
                                min="35" 
                                max="42"
                                placeholder="Enter temperature"
                                required
                            >
                        </div>
                    </div>
                </div>
            </div>

            <center>
            <button type="submit" class="submit-btn">
                
                <span>Get Recommendation</span>
                <div class="ripple"></div>
               
            </button>
            </center>
        </form>

        <!-- Results Section -->
        <div id="result" class="hidden">
            <h2>Recommendation</h2>
            <div id="recommendation"></div>
        </div>
    </div>

    <!-- <script src="script2.js"></script>-->

        

        <script>

// Get references to all sections
const loginPage = document.getElementById('login-page');
const registerPage = document.getElementById('register-page');
const recommendationPage = document.getElementById('recommendation-page');
const loginForm = document.getElementById('loginForm');
const registerForm = document.getElementById('registerForm');
const loginNavBtn = document.getElementById('loginNavBtn');
const registerNavBtn = document.getElementById('registerNavBtn');
const homepage = document.getElementById("homepage");
const result = document.getElementById("result");


// Function to show only one section
function showOnlySection(section) {
    // Hide all sections initially
    homepage.classList.add("hidden");
    loginPage.classList.add("hidden");
    registerPage.classList.add("hidden");
    recommendationPage.classList.add("hidden");
    result.classList.add("hidden");

    // Display only the requested section
    section.classList.remove("hidden");
}

// Event listeners for navigation buttons
document.getElementById("homeNavBtn").addEventListener("click", () => {
    showOnlySection(homepage);
});

document.getElementById("loginNavBtn").addEventListener("click", () => {
    showOnlySection(loginPage);
});

document.getElementById("registerNavBtn").addEventListener("click", () => {
    showOnlySection(registerPage);
});

document.getElementById("contactNavBtn").addEventListener("click", () => {
    // Add functionality for the contact page if you have it
    // Otherwise, you can hide all sections or show a "Contact" section if created.
    console.log("Contact page functionality not implemented yet.");
});








// Navigation button handlers
loginNavBtn.addEventListener('click', () => showPage('login'));
registerNavBtn.addEventListener('click', () => showPage('register'));

// Show/Hide page function
function showPage(page) {
    // Hide all pages first
    loginPage.classList.add('hidden');
    registerPage.classList.add('hidden');
    recommendationPage.classList.add('hidden');
    
    // Remove active class from nav buttons
    loginNavBtn.classList.remove('active');
    registerNavBtn.classList.remove('active');
    
    // Show selected page
    switch(page) {
        case 'login':
            loginPage.classList.remove('hidden');
            loginNavBtn.classList.add('active');
            break;
        case 'register':
            registerPage.classList.remove('hidden');
            registerNavBtn.classList.add('active');
            break;
        case 'recommendation':
            recommendationPage.classList.remove('hidden');
            // Hide navigation buttons when showing recommendation page
            // loginNavBtn.style.display = 'none';
            // registerNavBtn.style.display = 'none';
            break;
    }
}

// Login form submission
loginForm.addEventListener('submit', (e) => {
    e.preventDefault();
    // Add your login authentication logic here
    
    // For demonstration, we'll just show the recommendation page
    showPage('recommendation');
});

// Register form submission
registerForm.addEventListener('submit', (e) => {
    e.preventDefault();
    // Add your registration logic here
    
    // After successful registration, show the login page
    showPage('login');
});

// Handle "switch form" links
document.getElementById('showRegister').addEventListener('click', (e) => {
    e.preventDefault();
    showPage('register');
});

document.getElementById('showLogin').addEventListener('click', (e) => {
    e.preventDefault();
    showPage('login');
});

// Check if user is already logged in (you can modify this based on your authentication method)
function checkAuthState() {
    // Add your authentication check logic here
    // For now, we'll assume user is not logged in
    showPage('login');
}

// Initialize the page
checkAuthState();

// Get form and result elements
const symptomForm = document.getElementById('symptomForm');
const resultDiv = document.getElementById('result');
const recommendationDiv = document.getElementById('recommendation');

// Drug recommendations database
const drugRecommendations = {
    // Common Symptoms
    fever: ['Acetaminophen (Tylenol)', 'Ibuprofen (Advil)'],
    headache: ['Acetaminophen (Tylenol)', 'Ibuprofen (Advil)', 'Aspirin'],
    muscle_aches: ['Ibuprofen (Advil)', 'Naproxen (Aleve)'],
    joint_pain: ['Ibuprofen (Advil)', 'Naproxen (Aleve)'],
    
    // Respiratory Symptoms
    runny_nose: ['Loratadine (Claritin)', 'Cetirizine (Zyrtec)'],
    sneezing: ['Loratadine (Claritin)', 'Cetirizine (Zyrtec)', 'Fexofenadine (Allegra)'],
    shortness_of_breath: ['Albuterol Inhaler'],
    wheezing: ['Albuterol Inhaler', 'Fluticasone (Flovent)'],
    asthma: ['Albuterol Inhaler', 'Fluticasone (Flovent)'],
    sinus_infection: ['Amoxicillin', 'Azithromycin'],
    
    // Digestive Symptoms
    heartburn: ['Omeprazole (Prilosec)', 'Famotidine (Pepcid)'],
    acid_reflux: ['Omeprazole (Prilosec)', 'Esomeprazole (Nexium)'],
    stomach_pain: ['Bismuth subsalicylate (Pepto-Bismol)', 'Simethicone (Gas-X)'],
    
    // Chronic Conditions
    high_blood_pressure: ['Lisinopril', 'Amlodipine'],
    type_2_diabetes: ['Metformin', 'Glipizide'],
    hypothyroidism: ['Levothyroxine'],
    
    // Mental Health
    depression: ['Sertraline (Zoloft)', 'Fluoxetine (Prozac)'],
    anxiety: ['Sertraline (Zoloft)', 'Escitalopram (Lexapro)'],
    
    // Other Symptoms
    itchy_eyes: ['Ketotifen eye drops', 'Artificial tears'],
    bacterial_infection: ['Amoxicillin', 'Azithromycin'],
    sore_throat: ['Acetaminophen (Tylenol)', 'Throat lozenges'],

    //Additional Symptoms
    fatigue: ['Vitamin B Complex', 'Iron Supplements'],
    dizziness: ['Meclizine (Antivert)', 'Dimenhydrinate (Dramamine)'],
    nausea: ['Ondansetron (Zofran)', 'Promethazine (Phenergan)'],
    vomiting: ['Prochlorperazine (Compazine)', 'Metoclopramide (Reglan)'],
    blurred_vision: ['Artificial Tears', 'Timolol (for glaucoma-related blurred vision)'],
    chest_pain: ['Nitroglycerin (for angina)', 'Aspirin'],
    palpitations: ['Beta-blockers (e.g., Metoprolol)', 'Calcium channel blockers (e.g., Verapamil)'],
    sweating: ['Antiperspirants', 'Clonidine (for hyperhidrosis)'],
    dry_mouth: ['Biotene Oral Balance Gel', 'Saliva substitutes'],
    difficulty_swallowing: ['Throat lozenges', 'Thickening agents for liquids'],
    insomnia: ['Melatonin', 'Diphenhydramine (Benadryl)'],
    hair_loss: ['Minoxidil (Rogaine)', 'Finasteride (Propecia)'],
    skin_rash: ['Hydrocortisone cream', 'Antihistamines'],
    constipation: ['Polyethylene glycol (MiraLAX)', 'Docusate (Colace)'],
    diarrhea: ['Loperamide (Imodium)', 'Bismuth subsalicylate (Pepto-Bismol)'],
    loss_of_appetite: ['Megestrol acetate (Megace)', 'Cyproheptadine (Periactin)'],
    weight_loss: ['Megestrol acetate (Megace)', 'Nutritional supplements'],
    frequent_urination: ['Tolterodine (Detrol)', 'Oxybutynin (Ditropan)'],
    back_pain: ['Ibuprofen (Advil)', 'Acetaminophen (Tylenol)'],
    cold_intolerance: ['Levothyroxine (if hypothyroid)', 'Wear warmer clothing']
};





const diseaseMappings = {
    thyroid: ['fatigue', 'weight_gain', 'cold_intolerance'],
    heart_disease: ['shortness_of_breath', 'chest_pain', 'high_blood_pressure'],
    allergy: ['sneezing', 'itchy_eyes', 'runny_nose'],
    cold: ['sneezing', 'runny_nose', 'sore_throat'],
    dehydration: ['dry_mouth', 'dizziness', 'nausea'],
    anemia: ['fatigue', 'dizziness', 'pale_skin'],
    diabetes: ['frequent_urination', 'weight_loss', 'blurred_vision'],
    hypertension: ['headache', 'high_blood_pressure', 'dizziness'],
    insomnia: ['insomnia', 'anxiety'],
    asthma: ['shortness_of_breath', 'wheezing', 'chest_tightness']
};

// Define the identifyDisease function
function identifyDisease(symptoms) {
    const identifiedDiseases = [];
    for (const [disease, diseaseSymptoms] of Object.entries(diseaseMappings)) {
        // Check if all symptoms for each disease are present in the checked symptoms
        if (diseaseSymptoms.every(symptom => symptoms.includes(symptom))) {
            identifiedDiseases.push(disease);
        }
    }
    return identifiedDiseases.length > 0 ? identifiedDiseases : ['No specific disease identified'];
}



// Handle form submission
symptomForm.addEventListener('submit', (e) => {
    e.preventDefault();
    
    // Get all checked symptoms
    const checkedSymptoms = [];
    const checkboxes = symptomForm.querySelectorAll('input[type="checkbox"]:checked');
    checkboxes.forEach(checkbox => {
        checkedSymptoms.push(checkbox.name);
    });
    
    // Get patient information
    const patientInfo = {
        age: document.getElementById('age').value,
        sex: document.getElementById('sex').value,
        bp: document.getElementById('bp').value,
        temperature: document.getElementById('temperature').value
    };

//identify potential disease
    const diseases = identifyDisease(checkedSymptoms);
    
    // Generate recommendations
    const recommendations = generateRecommendations(checkedSymptoms, patientInfo);
    
    // Display recommendations
    showRecommendations(recommendations, patientInfo,diseases);
});

function generateRecommendations(symptoms, patientInfo) {
    let recommendations = new Set();
    
    // Get recommendations for each symptom
    symptoms.forEach(symptom => {
        if (drugRecommendations[symptom]) {
            drugRecommendations[symptom].forEach(drug => {
                recommendations.add(drug);
            });
        }
    });
    
    // Convert Set to Array and apply any patient-specific filters
    let finalRecommendations = Array.from(recommendations);
    
    // Apply age-based filters
    if (parseInt(patientInfo.age) < 18) {
        // Filter out adult-only medications
        finalRecommendations = finalRecommendations.filter(drug => 
            !drug.includes('Zoloft') && 
            !drug.includes('Prozac') && 
            !drug.includes('Lexapro')
        );
    }
    
    return finalRecommendations;
}

function showRecommendations(recommendations, patientInfo, diseases) {
    // Show the result section
    resultDiv.classList.remove('hidden');
    
    // Get all checked symptoms and create a symptom-medicine mapping
    const checkedSymptoms = Array.from(document.querySelectorAll('input[type="checkbox"]:checked'))
        .map(checkbox => ({
            name: checkbox.name,
            label: checkbox.nextElementSibling.textContent.trim(),
            medicines: drugRecommendations[checkbox.name] || []
        }));

    // Create HTML content
    let html = `
        <div class="recommendation-container">
            <div class="patient-summary">
                <h3>Patient Information:</h3>
                <p>Age: ${patientInfo.age}</p>
                <p>Sex: ${patientInfo.sex}</p>
                <p>Blood Pressure: ${patientInfo.bp}</p>
                <p>Temperature: ${patientInfo.temperature}°C</p>
            </div>
            
            <div class="disease-summary">
                <h3>Identified Diseases:</h3>
                <ul>
                    ${diseases.map(disease => `<li>${disease.charAt(0).toUpperCase() + disease.slice(1)}</li>`).join('')}
                </ul>
            </div>

            <div class="symptoms-medicines">
                <h3>Symptoms and Recommended Medications:</h3>
                <div class="symptoms-grid">
                    ${checkedSymptoms.map(symptom => `
                        <div class="symptom-card">
                            <h4 class="symptom-name">${formatSymptomName(symptom.label)}</h4>
                            <ul class="medicine-list">
                                ${symptom.medicines.map(medicine => `
                                    <li class="medicine-item">${medicine}</li>
                                `).join('')}
                            </ul>
                        </div>
                    `).join('')}
                </div>
            </div>

            <div class="all-recommendations">
                <h3>All Recommended Medications:</h3>
                ${recommendations.length > 0 ? `
                    <ul class="drug-list">
                        ${recommendations.map(drug => `<li class="drug-item">${drug}</li>`).join('')}
                    </ul>
                ` : '<p>No specific medications recommended. Please consult with a healthcare provider.</p>'}
            </div>
            
            <div class="disclaimer">
                <p><strong>Important:</strong> This is a preliminary recommendation only. Please consult with a healthcare provider before starting any medication.</p>
            </div>
        </div>
    `;
    
    // Set the HTML content
    recommendationDiv.innerHTML = html;
    
    // Add CSS styles dynamically
    addStyles();
    
    // Scroll to recommendations
    resultDiv.scrollIntoView({ behavior: 'smooth' });
}

// Helper function to format symptom names
function formatSymptomName(name) {
    return name
        .split('_')
        .map(word => word.charAt(0).toUpperCase() + word.slice(1))
        .join(' ');
}

// Function to add styles
function addStyles() {
    const styleElement = document.createElement('style');
    styleElement.textContent = `
        .recommendation-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: #f9f9f9;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .symptoms-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .symptom-card {
            background: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }

        .symptom-name {
            color: #2c3e50;
            margin: 0 0 10px 0;
            padding-bottom: 5px;
            border-bottom: 2px solid #e0e0e0;
        }

        .medicine-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .medicine-item {
            padding: 5px 0;
            color: #34495e;
            border-left: 3px solid #3498db;
            padding-left: 10px;
            margin: 5px 0;
        }

        .patient-summary,
        .disease-summary,
        .all-recommendations {
            margin-bottom: 20px;
            padding: 15px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }

        .disclaimer {
            margin-top: 20px;
            padding: 15px;
            background: #fff3cd;
            border: 1px solid #ffeeba;
            border-radius: 4px;
            color: #856404;
        }

        h3 {
            color: #2c3e50;
            margin-bottom: 15px;
        }

        .drug-list {
            list-style: none;
            padding: 0;
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 10px;
        }

        .drug-item {
            background: #e8f4f8;
            padding: 10px;
            border-radius: 4px;
            color: #2c3e50;
        }
    `;
    document.head.appendChild(styleElement);
}

// Get a reference to the Contact page section
const contactPage = document.getElementById("contact-page");

// Update the showOnlySection function to hide the Contact page as well
function showOnlySection(section) {
    homepage.classList.add("hidden");
    loginPage.classList.add("hidden");
    registerPage.classList.add("hidden");
    recommendationPage.classList.add("hidden");
    result.classList.add("hidden");
    contactPage.classList.add("hidden");

    // Display only the requested section
    section.classList.remove("hidden");
}




// document.getElementById("trainModelBtn").addEventListener("click", () => {
//             // Display a loading message
//             const messageDiv = document.getElementById("trainModelMessage");
//             messageDiv.textContent = "Training the model, please wait...";

//             // Send POST request to the Flask backend
//             fetch("http://127.0.0.1:8884/train_model", {
//                 method: "POST"
//             })
//             .then(response => response.json())
//             .then(data => {
//                 // Display success message
//                 messageDiv.textContent = data.message;
//             })
//             .catch(error => {
//                 console.error("Error training model:", error);
//                 messageDiv.textContent = "An error occurred while training the model.";
//             });
//         });

document.getElementById("trainModelBtn").addEventListener("click", () => {
    const messageDiv = document.getElementById("trainModelMessage");
    messageDiv.textContent = "Training the model, please wait...";

    fetch('http://127.0.0.1:5000/train_model', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json'
        }
    })
    .then(response => {
        if (!response.ok) {
            throw new Error('Network response was not ok');
        }
        return response.json();
    })
    .then(data => {
        if (data.message) {
            messageDiv.textContent = data.message ;
        } else if (data.error) {
            messageDiv.textContent = "Error: " + data.error;
        }
    })
    .catch(error => {
        console.error('Error training model:', error);
        messageDiv.textContent = "An error occurred while training the model.";
    });
});


    </script>
</body>
</html>


    

